{% extends "app-base.html" %}
{% load staticfiles my_filters %}
{% block extrahead %}
    <link href="{% static "css/plugins/datapicker/datepicker3.css" %}" rel="stylesheet">
    <link href="{% static "css/plugins/chosen/chosen.css" %}" rel="stylesheet">
{% endblock extrahead %}
{% block content %}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10 m-t-md">
            <ol class="breadcrumb">
                <li>
                    <a href="{% url 'list_contacts' %}">Contacts</a>
                </li>
                <li class="active">
                    <strong>{{ label }} contact</strong>
                </li>
            </ol>
        </div>
    </div>
    <div class="m-t-md">
        <select id="template-chooser">
        {% for template in templates %}
            <option value="{{template.1}}" >{{template.0}}</option>
        {% endfor %}
        </select>
    </div>
    <div id="add_a_client" class="form-template m-t-md">
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#tab-1" data-toggle="tab">Lead Tracker</a></li>
            <li class=""><a href="#tab-2" data-toggle="tab">Contact Information</a></li>
            <li class=""><a href="#tab-3" data-toggle="tab">Address Information</a></li>
            <li class=""><a href="#tab-4" data-toggle="tab">Employment Information</a></li>
            <li class=""><a href="#tab-5" data-toggle="tab">Hardships</a></li>
            <li class=""><a href="#tab-6" data-toggle="tab">Special Notes</a></li>
            <li class=""><a href="#tab-7" data-toggle="tab">3rd Party Speaker Information</a></li>
        </ul>
        <form id="contact-form" action="{% if label == 'Add' %}{% url 'add_contact' %}{% else %}{% url 'edit_contact' contact_id=contact_id %}{% endif %}" method="post">
            {% csrf_token %}
            {% if label == 'Edit' %}
                <input type="hidden" id="id_contact_id" name="contact_id" value="{{ contact_id }}">
            {% endif %}
            <div class="col-xs-12 m-t-md m-b-md">
                {{ form.contact_id }}
                <div class="m-r-md inline">
                    <label class="reset-min-width">Active:</label>
                    <div class="inline vertical-align no-margins">{{ form.active }}</div>
                </div>
                <div class="m-r-md inline">
                    <label class="reset-min-width">Company:</label>
                    <div class="inline vertical-align no-margins">{{ form.company }}</div>
                </div>
                <div class="m-r-md inline">
                    <label class="reset-min-width">Assigned To:</label>
                    <div class="inline vertical-align no-margins">{{ form.assigned_to }}</div>
                </div>
            </div>
            <div class="tab-content col-xs-12 no-padding-sides">
                <div class="tab-pane active" id="tab-1">
                    {% include "contact/partials/contact/lead_tracker.html" %}
                </div>
                <div class="tab-pane" id="tab-2">
                    {% include "contact/partials/contact/info.html" %}
                </div>
                <div class="tab-pane" id="tab-3">
                    {% include "contact/partials/contact/address.html" %}
                </div>
                <div class="tab-pane" id="tab-4">
                    {% include "contact/partials/contact/employment.html" %}
                </div>
                <div class="tab-pane" id="tab-5">
                    {% include "contact/partials/contact/hardships.html" %}
                </div>
                <div class="tab-pane" id="tab-6">
                    {% include "contact/partials/contact/special_notes.html" %}
                </div>
                <div class="tab-pane" id="tab-7">
                    {% include "contact/partials/contact/third_party_speaker.html" %}
                </div>
            </div>
            <div class="col-xs-12 m-t-md padding-for-footer">
                <button class="btn btn-primary" type="submit">Save Contact</button>
            </div>
        </form>
    </div>
    <script type="text/javascript">
        var usersByCompany = {{ users_by_company|jsonify }};
        var errors = {{ form_errors|jsonify }};
        var isEdit = {% if label == 'Edit' %}true{% else %}false{% endif %};
    </script>
    <script src="{% static "js/contact/contact.js" %}"></script>

{% endblock content %}
