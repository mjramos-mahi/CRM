{% extends "app-base.html" %}
{% load staticfiles my_filters %}
{% block content %}
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-xs-12 m-t-md">
            <ol class="breadcrumb">
                <li>
                    <a href="{% url "users_list" %}">Users & Administration</a>
                </li>
                <li class="active">
                    <a href="{% url "edit_user" user_id=edited_user.id %}">Edit User</a>
                </li>
            </ol>
        </div>
    </div>
    <div class="m-t-md col-xs-12 padding-for-footer">
        <form id="edit-user-form" action="{% url "edit_user" user_id=edited_user.id %}" class="col-xs-12 no-padding" method="post">
            <input type="text" style="display: none">
            <input type="password" style="display: none">
            {% csrf_token %}
            <input type="hidden" id="id_id" name="id" value="{{ edited_user.id }}">
            <div class="col-xs-12 no-padding">
                <h3 class="col-xs-6 no-padding-sides m-b-xs">User Login Information</h3>
                <div class="col-xs-6 no-padding-sides m-b-xs" style="{% if not edited_user.is_active %}display: none;{% endif %}">
                    <button id="suspend-user" class="btn btn-primary pull-right" type="button">
                        <span class="glyphicon glyphicon-user red m-r-xs"></span>Suspend User
                    </button>
                </div>
                <div class="col-xs-6 no-padding-sides m-b-xs" style="{% if edited_user.is_active %}display: none;{% endif %}">
                    <button id="activate-user" class="btn btn-primary pull-right" type="button">
                        <span class="glyphicon glyphicon-user green m-r-xs"></span>Activate User
                    </button>
                </div>
                <div class="col-xs-12 border p-xs">
                    <div class="col-xs-8 no-padding-sides">
                        <div class="col-xs-4 no-padding-sides">
                            <label>Username*</label>
                            <div>{{ form.username }}</div>
                        </div>
                        <div class="col-xs-4 no-padding-sides">
                            <label>Password*</label>
                            <div>{{ form.password }}</div>
                        </div>
                        <div class="col-xs-4 no-padding-sides">
                            <label>Confirm Password*</label>
                            <div>{{ form.confirm_password }}</div>
                        </div>
                    </div>
                    <div class="col-xs-2 no-padding-sides">
                        <label>User Role</label>
                        <div>{{ form.groups }}</div>
                    </div>
                    <div class="col-xs-2 no-padding-sides">
                        <label>Reports To</label>
                        <div>{{ form.reports_to }}</div>
                    </div>
                    <div class="col-xs-12 no-padding-sides">
                        <div class="inline vertical-align">{{ form.email_login_info }}</div>
                        <label for="email_login_info">Email Login Info</label>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 no-padding m-t-md">
                <h3>Contact Information</h3>
                <div class="col-xs-12 border p-xs">
                    <div class="col-xs-3 no-padding-sides">
                        <label>First Name*</label>
                        <div>{{ form.first_name }}</div>
                    </div>
                    <div class="col-xs-3 no-padding-sides">
                        <label>Last Name*</label>
                        <div>{{ form.last_name }}</div>
                    </div>
                    <div class="col-xs-3 no-padding-sides">
                        <label>Email*</label>
                        <div>{{ form.email }}</div>
                    </div>
                    <div class="col-xs-3 no-padding-sides">
                        <label>Company</label>
                        <div>{{ form.company }}</div>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 no-padding m-t-md">
                <h3>Shared User Data</h3>
                <p class="small">Select the users whos contacts are visible to the user you are editing. Check share with all users to have access to all contacts, regardless of user.</p>
                <div class="col-xs-12 no-padding">
                    <div class="col-xs-12 no-padding">
                        <div class="inline vertical-align">{{ form.shared_with_all }}</div>
                        <label for="shared_with_all">Share with all users</label>
                    </div>
                    <div class="col-xs-12 no-padding">{{ form.shared_user_data }}</div>
                </div>
            </div>
            <button class="btn btn-primary m-t-md" type="submit">Save</button>
        </form>
    </div>
    <script type="text/javascript">
        var roleId = '{{ role_id }}';
        var suspendUserUrl = '{% url "suspend_user" user_id=edited_user.id %}';
        var activateUserUrl = '{% url "activate_user" user_id=edited_user.id %}';
    </script>
    <script src="{% static "js/admin/edit_user.js" %}"></script>
{% endblock %}